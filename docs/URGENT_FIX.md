# üî• –°–†–û–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
```
Error registering user: no such table: users
```

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
‚úÖ –¢–µ–ø–µ—Ä—å –ë–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –Ω—É–∂–Ω—ã

## –ß–¢–û –î–ï–õ–ê–¢–¨ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

### 1. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
```bash
git add .
git commit -m "Add auto table creation on first run"
git push origin main
```

### 2. –î–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è –Ω–∞ Railway
Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç Docker-–æ–±—Ä–∞–∑
- –ó–∞–ø—É—Å—Ç–∏—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –±–æ—Ç
- **–¢–∞–±–ª–∏—Ü—ã –ë–î —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ë–î

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. `/start`
3. –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫
4. –ù–∞–∂–º–∏—Ç–µ "üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É"

## –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ (Railway)

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):**
```
Callback query received: start_game from chat 540529430
Initializing database with URL: sqlite+aiosqlite:///./vechnost.db
Database initialized successfully
Database tables created successfully  ‚Üê –≠–¢–û –ì–õ–ê–í–ù–û–ï!
# –î–∞–ª—å—à–µ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
```

‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è):**
```
Error registering user: no such table: users
Error checking user access: no such table: users
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

–§–∞–π–ª: `vechnost_bot/payments/database.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ `get_db()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
- –ë–æ–ª—å—à–µ **–Ω–µ –Ω—É–∂–Ω–æ** –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å–∫–∞—Ç—å `alembic upgrade head`

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω:**
   ```bash
   git log --oneline -1  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ–º–º–∏—Ç "Add auto table creation"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway:**
   - Deployments ‚Üí Latest ‚Üí View Logs
   - –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `Database tables created successfully`

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ Redeploy:**
   - Railway ‚Üí Settings ‚Üí Redeploy

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ `database.py` –Ω–∞ Railway:**
   - –í –ª–æ–≥–∞—Ö –¥–µ–ø–ª–æ—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ –æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è `database.py` –∑–∞–¥–µ–ø–ª–æ–∏–ª–∞—Å—å

## –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –æ—á–µ–Ω—å —Å—Ä–æ—á–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã:

```bash
# –í Railway ‚Üí Shell (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
python -c "
import asyncio
from vechnost_bot.payments.database import create_tables
asyncio.run(create_tables())
"
```

–ù–æ –ª—É—á—à–µ –¥–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è - —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

**–ò–¢–û–ì–û:** –ü—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π—Ç–µ `git push` –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è. –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è —Å–∞–º–∏! üöÄ

