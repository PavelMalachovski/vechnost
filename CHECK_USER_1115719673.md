# ✅ Проверка пользователя 1115719673

Пользователь **1115719673** только что купил подписку.

## 🚀 Быстрая проверка (3 шага):

### Шаг 1: Откройте Railway Shell
```
Railway.app → Ваш проект → Shell (иконка терминала)
```

### Шаг 2: Проверьте статус пользователя
```bash
python check_user_payment.py 1115719673
```

### Шаг 3: Смотрите результат

#### ✅ Если видите "USER HAS ACTIVE ACCESS ✅":
Всё отлично! Пользователь может использовать бота.

Попросите её:
1. Открыть бота
2. Нажать "🔄 Проверить статус оплаты"
3. Начать игру

---

#### ❌ Если видите "USER DOES NOT HAVE ACCESS ❌":

**Смотрите детали:**

##### Вариант A: Есть подписки и платежи
```
📋 SUBSCRIPTIONS (1):
   ✅ Subscription ID: 1
💳 PAYMENTS (1):
   ✅ Payment ID: 1
```
→ Попросите пользователя нажать "Проверить статус" в боте

##### Вариант B: Подписок нет
```
📋 SUBSCRIPTIONS: None
💳 PAYMENTS: None
```
→ Вебхук от Tribute не пришёл. **Активируйте вручную:**

```bash
python activate_user.py 1115719673 30
```

---

## 📝 Что покажет проверка:

```
============================================================
Checking user: 1115719673
============================================================

✅ USER FOUND:
   ID: 1
   Telegram ID: 1115719673
   Username: @username (если есть)
   Name: Имя Фамилия
   Created: Дата регистрации

────────────────────────────────────────────────────────────

📋 SUBSCRIPTIONS (X):
   ... список подписок ...

────────────────────────────────────────────────────────────

💳 PAYMENTS (X):
   ... список платежей ...

────────────────────────────────────────────────────────────

🔔 RECENT WEBHOOK EVENTS (X):
   ... последние вебхуки от Tribute ...

============================================================
🎉 RESULT: USER HAS ACTIVE ACCESS ✅
============================================================
```

---

## 🔧 Ручная активация (если нужно):

```bash
# 30 дней (стандарт)
python activate_user.py 1115719673 30

# Или на другой срок:
python activate_user.py 1115719673 7    # неделя
python activate_user.py 1115719673 365  # год
```

### Вывод после активации:
```
Activating user 1115719673 for 30 days...
✅ Found user: Имя Фамилия

✅ SUBSCRIPTION ACTIVATED!
   Start: 2025-10-12 22:35:00
   End: 2025-11-11 22:35:00
   Duration: 30 days

🎉 User 1115719673 now has access to the bot!
```

---

## ❓ Если пользователь не найден

```
❌ USER NOT FOUND
```

**Причина**: Пользователь ещё не открывал бота

**Решение**:
1. Попросите пользователя открыть бота: `@your_bot_name`
2. Нажать `/start`
3. Выбрать язык
4. Повторите проверку

---

## 🔍 Диагностика проблем

| Ситуация | Действие |
|----------|----------|
| Пользователь есть, подписка активна | Попросить нажать "Проверить статус" в боте |
| Пользователь есть, подписки нет | Активировать вручную (`activate_user.py`) |
| Пользователя нет в БД | Попросить открыть бота и нажать `/start` |
| Есть платёж, но нет подписки | Проверить вебхуки в Tribute, активировать вручную |

---

## 📚 Полная документация:

- **`docs/CHECK_USER_GUIDE.md`** - Детальное руководство по проверке
- **`docs/ADMIN_SCRIPTS.md`** - Все админские скрипты
- **`docs/PAYMENT_LINK_FIX.md`** - Настройка оплаты

---

## ⚡ Быстрые команды (шпаргалка):

```bash
# Проверить пользователя
python check_user_payment.py 1115719673

# Активировать на 30 дней
python activate_user.py 1115719673 30

# Посмотреть всех пользователей
python list_users.py

# Синхронизировать продукты
python sync_products.py
```

---

**После выполнения проверки сообщите пользователю результат!** ✅

